if(CONFIG_SPI_LEGACY_API)
  zephyr_sources_ifdef(CONFIG_SPI_DW 		spi_dw_legacy.c)
  zephyr_sources_ifdef(CONFIG_SPIM_NRF52	spim_nrf52_legacy.c)
  zephyr_sources_ifdef(CONFIG_SPIS_NRF5		spis_nrf5_legacy.c)
  zephyr_sources_ifdef(CONFIG_SPI_INTEL		spi_intel.c)
  zephyr_sources_ifdef(CONFIG_SPI_MCUX_DSPI	spi_mcux_dspi.c)
  zephyr_sources_ifdef(CONFIG_SPI_QMSI		spi_qmsi.c)
  zephyr_sources_ifdef(CONFIG_SPI_QMSI_SS	spi_qmsi_ss.c)
else()
  zephyr_sources_ifdef(CONFIG_SPI_DW		spi_dw.c)
  zephyr_sources_ifdef(CONFIG_SPI_STM32		spi_ll_stm32.c)
  zephyr_sources_ifdef(CONFIG_SPI_SAM0		spi_sam0.c)
  zephyr_sources_ifdef(CONFIG_SPI_NRF5		spi_nrf5.c)
endif()

zephyr_sources_ifdef(CONFIG_USERSPACE		spi_handlers.c)
